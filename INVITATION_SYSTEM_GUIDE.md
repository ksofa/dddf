# üì® –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π Taska

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–µ–∫—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä–∞–º (PM) –ø—Ä–∏–≥–ª–∞—à–∞—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –≤ —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã. –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è—Ö –∏ –º–æ–≥—É—Ç –ø—Ä–∏–Ω—è—Ç—å –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∏—Ö.

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
1. **–î–æ–±–∞–≤–ª–µ–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ä–æ—É—Ç `/api/invitations`** - —Ç–µ–ø–µ—Ä—å frontend –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –≤—Å–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å Firebase Timestamp** - —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø—Ä–∏–Ω—è—Ç–∏–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
3. **–î–æ–±–∞–≤–ª–µ–Ω —Ä–æ—É—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π** - `/api/projects/:projectId/send-invitation`
4. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
5. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–º–∞–Ω–¥—É** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –∫–æ–º–∞–Ω–¥

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è PM (–æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π):

1. **–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∫–∞–∫ PM**
2. **–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç** –∏–∑ —Å–ø–∏—Å–∫–∞ –≤–∞—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
3. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é**:
   ```javascript
   POST /api/projects/{projectId}/send-invitation
   {
     "executorId": "user_id_–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",
     "message": "–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –≤–∞—Å –≤ –Ω–∞—à –ø—Ä–æ–µ–∫—Ç!"
   }
   ```

### –î–ª—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π (–ø–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π):

1. **–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∫–∞–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å**
2. **–ü–æ–ª—É—á–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π**:
   ```javascript
   GET /api/invitations?status=pending
   ```
3. **–ü—Ä–∏–º–∏—Ç–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ**:
   ```javascript
   POST /api/invitations/{invitationId}/accept
   ```
4. **–ò–ª–∏ –æ—Ç–∫–ª–æ–Ω–∏—Ç–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ**:
   ```javascript
   POST /api/invitations/{invitationId}/decline
   ```

## üìã API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–æ—É—Ç—ã:

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª–∏ |
|-------|----------|----------|------|
| `GET` | `/api/invitations` | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è | executor, pm, client |
| `POST` | `/api/invitations/{id}/accept` | –ü—Ä–∏–Ω—è—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ | executor, client |
| `POST` | `/api/invitations/{id}/decline` | –û—Ç–∫–ª–æ–Ω–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ | executor, client |
| `POST` | `/api/projects/{id}/send-invitation` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ | pm, admin |

### –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–æ—É—Ç—ã:

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª–∏ |
|-------|----------|----------|------|
| `GET` | `/api/team-invitations` | –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ –∫–æ–º–∞–Ω–¥—É | executor |
| `POST` | `/api/team-invitations/{id}/respond` | –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ | executor |
| `GET` | `/api/projects/{id}/team-invitations` | –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ | pm, admin |

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```bash
node scripts/test-invitation-system-fix.js
```

### –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:
- **PM**: `pm@test.test` (–ø–∞—Ä–æ–ª—å: `password123`)
- **–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å**: `executor1@test.test` (–ø–∞—Ä–æ–ª—å: `password123`)

## üìä –°—Ç–∞—Ç—É—Å—ã –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π

| –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `pending` | –û–∂–∏–¥–∞–µ—Ç –æ—Ç–≤–µ—Ç–∞ |
| `accepted` | –ü—Ä–∏–Ω—è—Ç–æ |
| `rejected` | –û—Ç–∫–ª–æ–Ω–µ–Ω–æ |

## ÔøΩÔøΩ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ –∫–æ–º–∞–Ω–¥—É (team_invitation):
```json
{
  "id": "invitation_id",
  "type": "team_invitation",
  "projectId": "project_id",
  "projectName": "–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞",
  "userId": "executor_id",
  "userName": "–ò–º—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è",
  "userEmail": "email@example.com",
  "senderId": "pm_id",
  "senderName": "–ò–º—è PM",
  "message": "–¢–µ–∫—Å—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è",
  "status": "pending",
  "createdAt": "timestamp",
  "updatedAt": "timestamp"
}
```

## üîê –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### PM –º–æ–∂–µ—Ç:
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º
- ‚úÖ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- ‚úÖ –£–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–∞–Ω–¥–æ–π –ø—Ä–æ–µ–∫—Ç–∞

### –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ –º–æ–≥—É—Ç:
- ‚úÖ –ü–æ–ª—É—á–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- ‚úÖ –ü—Ä–∏–Ω–∏–º–∞—Ç—å/–æ—Ç–∫–ª–æ–Ω—è—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç:
- ‚úÖ –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è PM
- ‚úÖ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- ‚úÖ –£–ø—Ä–∞–≤–ª—è—Ç—å —Å–∏—Å—Ç–µ–º–æ–π

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:

| –ö–æ–¥ | –û—à–∏–±–∫–∞ | –†–µ—à–µ–Ω–∏–µ |
|-----|--------|---------|
| `400` | –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è |
| `403` | –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ | –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –Ω—É–∂–Ω—É—é —Ä–æ–ª—å |
| `404` | –ü—Ä–æ–µ–∫—Ç/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å ID |
| `500` | –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ |

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è–º–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
- –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- –ü—Ä–∏–Ω—è—Ç–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å frontend

Frontend –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `frontend/src/api/projects.ts`:

```typescript
// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
const invitations = await getInvitations('pending');

// –ü—Ä–∏–Ω—è—Ç–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
await acceptInvitation(invitationId);

// –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
await declineInvitation(invitationId);
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫

–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —É–±–µ–¥–∏—Ç–µ—Å—å:

- [ ] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (`npm start`)
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–æ–ª–∏
- [ ] –ü—Ä–æ–µ–∫—Ç—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã PM
- [ ] Firebase –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

---

**–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ 